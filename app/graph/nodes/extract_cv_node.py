from app.graph.state import State
from app.graph.chains.extract_cv_data import extract_chain

result = '{"full_name":"Arkadiusz Piotrek","professional_title":null,"summary":null,"contact":{"email":"arkadiusz.piotrek@onet.eu","phone":"693 666 555","linkedin":null,"github":null,"portfolio":null,"location":"87-100 Toruń, ul. Bygdoska 68/6"},"work_experience":[{"company":"Eurobank S.A.","position":"Manager Oddziału Bankowego","start_date":"05.2015","end_date":null,"location":"Toruń","responsibilities":[], "technologies": []},{"company":"Bank Gospodarki Żywnościowej","position":"Dyrektor Oddziału Podległego","start_date":"04.2014","end_date":"05.2015","location":"Toruń","responsibilities":["Praca z klientem detalicznym, instytucjonalnym i MSP","Pozyskanie partnerów sprzedaży","Powiększenie portfela oddziałowego o ok. 200 klientów ciągu 12 miesięcy","Udzielanie kredytów, Lessingów i innych form finansowania","Reanimacja oddziału – uzupełnienie kadry, uruchomienie sprzedaży i procesów kontrolnych, praca nad wizerunkiem placówki na rynku lokalnym, wdrożenie standardów jakościowych"],"technologies": []},{"company":"CitiHandlowy/Bank Handlowy w Warszawie S.A.","position":"Dyrektor Oddziałów w Toruniu i w Gdańsku","start_date":"08.2008","end_date":"01.2013","location":"Toruń, Gdańsk","responsibilities":["Praca z klientem detalicznym, zamożnym i MSP","Prowadzenie oddziałów banku, organizacja pracy, rozliczanie z wyników","Planowanie i organizacja eventów i spotkań z klientami zarówno istniejącymi, jak i potencjalnymi"],"technologies": []},{"company":"CitiHandlowy/Bank Handlowy w Warszawie S.A.","position":"Dyrektor Rynku Pomorze","start_date":"10.2007","end_date":"08.2008","location":"Pomorze Zachód","responsibilities":["Zarządzanie 8 oddziałami 4-6 osobowymi","Zarządzanie procesem i efektywnością sprzedaży produktów kredytowych w podległym rynku"],"technologies": []},{"company":"CitiHandlowy/Bank Handlowy w Warszawie S.A.","position":"Kierownik Oddziału w Inowrocławiu","start_date":"07.2006","end_date":"10.2007","location":"Inowrocław","responsibilities":["Zarządzanie oddziałem czteroosobowym","Odpowiedzialność za wyniki sprzedażowe, jakościowe, audyt i windykację","Miejsce w pierwszej trójce rankingów sprzedażowych w kraju"],"technologies": []},{"company":"CitiHandlowy/Bank Handlowy w Warszawie S.A.","position":"Doradca Kredytowy, Zastępca Managera","start_date":"04.2005","end_date":"07.2006","location":null,"responsibilities":[], "technologies": []},{"company":"RESERVED","position":"Visual Merchandising Manager","start_date":"09.2004","end_date":"04.2005","location":"Toruń","responsibilities":["Zarządzanie grupą sprzedawców od strony utrzymania odpowiedniego wizerunku salonu – grupa około 15 osób"],"technologies": []},{"company":"SBS S.C. Levis","position":"Sprzedawca Dekorator","start_date":"09.2002","end_date":"10.2003","location":"Toruń","responsibilities":["Obsługa klienta, przyjmowanie dostaw, inwentaryzacje, visual merchanising"],"technologies": []},{"company":"Tres Amigos","position":"Asystent kierownika klubu, kierownik klubu","start_date":"06.2000","end_date":"08.2002","location":"Toruń","responsibilities":["Nadzór i kontrola nad klubem, organizacja imprez zamkniętych, organizacja promocji, sprzedaż i negocjacje usług – praca z klientem i dostawcami"],"technologies": []}],"education":[{"institution":"Wyższa Szkoła Bankowa w Toruniu","degree":"inżynier","field_of_study":"Zarządzanie","start_date":"2016","end_date":null,"description":null,"gpa":null},{"institution":"Uniwersytet Mikołaja Kopernika","degree":"licencjat","field_of_study":"Filozofia","start_date":"2001","end_date":"2006","description":null,"gpa":null},{"institution":"Szkoła Muzyczna im. F. Chopina Warszawa","degree":null,"field_of_study":"Wydział Jazzu kierunek saksofon","start_date":"1998","end_date":"2000","description":null,"gpa":null}],"technical_skills":[], "soft_skills":[], "languages":[], "projects":[], "certifications":[], "interests":["Muzyka jazzowa - gra na instrumencie, fizyka i teoria ewolucji, literatura, bieganie"], "volunteer_experience":null,"publications":[], "awards":[]}'


async def extract_cv_node(state: State) -> State:
    cv_text = state["cv_text"]

    # result = await extract_chain.ainvoke({"cv_text": cv_text})

    return {"extracted_cv": result}
